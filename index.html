<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Portfolio Tracker</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f8f9fa;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .metric-label {
            color: #666;
            font-size: 12px;
        }
        
        .table-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        
        th {
            background-color: #34495e;
            color: white;
            padding: 12px 8px;
            text-align: left;
            font-weight: 500;
            border-bottom: 2px solid #2c3e50;
        }
        
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #eee;
        }
        
        input, select {
            width: 100%;
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52,152,219,0.3);
        }
        
        .currency {
            text-align: right;
        }
        
        .percentage {
            text-align: center;
        }
        
        .add-row-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .add-row-btn:hover {
            background-color: #229954;
        }
        
        .delete-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .delete-btn:hover {
            background-color: #c0392b;
        }
        
        .export-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
        }
        
        .export-btn:hover {
            background-color: #2980b9;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin: 20px 0 10px 0;
            color: #2c3e50;
        }
        
        .allocation-chart {
            max-width: 400px;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸ“ˆ Investment Portfolio Tracker</h1>
        <p>Track your investments, allocations, and performance</p>
    </div>

    <div class="dashboard" id="dashboard">
        <div class="metric-card">
            <div class="metric-value" id="totalValue">$0.00</div>
            <div class="metric-label">TOTAL PORTFOLIO VALUE</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="monthlyInterest">$0.00</div>
            <div class="metric-label">MONTHLY INTEREST</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="annualReturn">0.00%</div>
            <div class="metric-label">ANNUAL RETURN RATE</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="avgTaxRate">0.00%</div>
            <div class="metric-label">AVG TAX RATE</div>
        </div>
    </div>

    <div class="table-container">
        <div class="section-title">Investment Holdings</div>
        <button class="add-row-btn" onclick="addRow()">+ Add Investment</button>
        <button class="export-btn" onclick="exportToCSV()">Export to CSV</button>
        
        <table id="investmentTable">
            <thead>
                <tr>
                    <th>Investment Name</th>
                    <th>Asset Type</th>
                    <th>Current Value ($)</th>
                    <th>Allocation (%)</th>
                    <th>Monthly Interest ($)</th>
                    <th>Annual Rate (%)</th>
                    <th>Tax Rate (%)</th>
                    <th>Last Updated</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="text" placeholder="e.g. S&P 500 Index Fund" oninput="updateCalculations()"></td>
                    <td>
                        <select onchange="updateCalculations()">
                            <option value="">Select Type</option>
                            <option value="Stocks">Stocks</option>
                            <option value="Bonds">Bonds</option>
                            <option value="ETF">ETF</option>
                            <option value="Mutual Fund">Mutual Fund</option>
                            <option value="Real Estate">Real Estate</option>
                            <option value="Crypto">Cryptocurrency</option>
                            <option value="Cash">Cash/Savings</option>
                            <option value="Commodities">Commodities</option>
                            <option value="Other">Other</option>
                        </select>
                    </td>
                    <td><input type="number" class="currency" step="0.01" placeholder="0.00" oninput="updateCalculations()"></td>
                    <td><input type="number" class="percentage" step="0.01" placeholder="0.00" readonly></td>
                    <td><input type="number" class="currency" step="0.01" placeholder="0.00" oninput="updateCalculations()"></td>
                    <td><input type="number" class="percentage" step="0.01" placeholder="0.00" readonly></td>
                    <td><input type="number" class="percentage" step="0.01" placeholder="0.00" oninput="updateCalculations()"></td>
                    <td><input type="date" oninput="updateCalculations()"></td>
                    <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="table-container">
        <div class="section-title">Asset Allocation Summary</div>
        <table id="allocationTable">
            <thead>
                <tr>
                    <th>Asset Type</th>
                    <th>Total Value ($)</th>
                    <th>Percentage (%)</th>
                    <th>Monthly Interest ($)</th>
                </tr>
            </thead>
            <tbody id="allocationBody">
                <!-- Dynamically populated -->
            </tbody>
        </table>
    </div>

    <script>
        function addRow() {
            const table = document.getElementById('investmentTable').getElementsByTagName('tbody')[0];
            const newRow = table.insertRow();
            
            newRow.innerHTML = `
                <td><input type="text" placeholder="e.g. Apple Stock" oninput="updateCalculations()"></td>
                <td>
                    <select onchange="updateCalculations()">
                        <option value="">Select Type</option>
                        <option value="Stocks">Stocks</option>
                        <option value="Bonds">Bonds</option>
                        <option value="ETF">ETF</option>
                        <option value="Mutual Fund">Mutual Fund</option>
                        <option value="Real Estate">Real Estate</option>
                        <option value="Crypto">Cryptocurrency</option>
                        <option value="Cash">Cash/Savings</option>
                        <option value="Commodities">Commodities</option>
                        <option value="Other">Other</option>
                    </select>
                </td>
                <td><input type="number" class="currency" step="0.01" placeholder="0.00" oninput="updateCalculations()"></td>
                <td><input type="number" class="percentage" step="0.01" placeholder="0.00" readonly></td>
                <td><input type="number" class="currency" step="0.01" placeholder="0.00" oninput="updateCalculations()"></td>
                <td><input type="number" class="percentage" step="0.01" placeholder="0.00" readonly></td>
                <td><input type="number" class="percentage" step="0.01" placeholder="0.00" oninput="updateCalculations()"></td>
                <td><input type="date" oninput="updateCalculations()"></td>
                <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
            `;
            
            updateCalculations();
        }

        function deleteRow(btn) {
            const row = btn.parentNode.parentNode;
            row.parentNode.removeChild(row);
            updateCalculations();
        }

        function updateCalculations() {
            const table = document.getElementById('investmentTable');
            const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');
            
            let totalValue = 0;
            let totalMonthlyInterest = 0;
            let totalTaxableInterest = 0;
            let assetTypes = {};

            // Calculate totals and allocations
            for (let i = 0; i < rows.length; i++) {
                const inputs = rows[i].getElementsByTagName('input');
                const select = rows[i].getElementsByTagName('select')[0];
                
                const value = parseFloat(inputs[2].value) || 0;
                const monthlyInterest = parseFloat(inputs[4].value) || 0;
                const taxRate = parseFloat(inputs[6].value) || 0;
                const assetType = select.value;

                totalValue += value;
                totalMonthlyInterest += monthlyInterest;
                totalTaxableInterest += (monthlyInterest * (taxRate / 100));

                // Group by asset type
                if (assetType && value > 0) {
                    if (!assetTypes[assetType]) {
                        assetTypes[assetType] = { value: 0, interest: 0 };
                    }
                    assetTypes[assetType].value += value;
                    assetTypes[assetType].interest += monthlyInterest;
                }
            }

            // Update allocations and annual rates
            for (let i = 0; i < rows.length; i++) {
                const inputs = rows[i].getElementsByTagName('input');
                const value = parseFloat(inputs[2].value) || 0;
                const monthlyInterest = parseFloat(inputs[4].value) || 0;
                
                // Calculate allocation percentage
                const allocation = totalValue > 0 ? (value / totalValue * 100) : 0;
                inputs[3].value = allocation.toFixed(2);
                
                // Calculate annual rate
                const annualRate = value > 0 ? (monthlyInterest * 12 / value * 100) : 0;
                inputs[5].value = annualRate.toFixed(2);
            }

            // Update dashboard
            document.getElementById('totalValue').textContent = '$' + totalValue.toLocaleString('en-US', {minimumFractionDigits: 2});
            document.getElementById('monthlyInterest').textContent = '$' + totalMonthlyInterest.toLocaleString('en-US', {minimumFractionDigits: 2});
            
            const avgAnnualReturn = totalValue > 0 ? (totalMonthlyInterest * 12 / totalValue * 100) : 0;
            document.getElementById('annualReturn').textContent = avgAnnualReturn.toFixed(2) + '%';
            
            const avgTaxRate = totalMonthlyInterest > 0 ? (totalTaxableInterest / totalMonthlyInterest * 100) : 0;
            document.getElementById('avgTaxRate').textContent = avgTaxRate.toFixed(2) + '%';

            // Update allocation table
            updateAllocationTable(assetTypes, totalValue);
        }

        function updateAllocationTable(assetTypes, totalValue) {
            const tbody = document.getElementById('allocationBody');
            tbody.innerHTML = '';

            Object.keys(assetTypes).forEach(type => {
                const row = tbody.insertRow();
                const percentage = totalValue > 0 ? (assetTypes[type].value / totalValue * 100) : 0;
                
                row.innerHTML = `
                    <td>${type}</td>
                    <td>$${assetTypes[type].value.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                    <td>${percentage.toFixed(2)}%</td>
                    <td>$${assetTypes[type].interest.toLocaleString('en-US', {minimumFractionDigits: 2})}</td>
                `;
            });
        }

        function exportToCSV() {
            const table = document.getElementById('investmentTable');
            const rows = table.getElementsByTagName('tr');
            let csv = [];

            // Headers
            const headers = [];
            const headerCells = rows[0].getElementsByTagName('th');
            for (let i = 0; i < headerCells.length - 1; i++) { // Exclude Action column
                headers.push(headerCells[i].textContent);
            }
            csv.push(headers.join(','));

            // Data rows
            const tbody = table.getElementsByTagName('tbody')[0];
            const dataRows = tbody.getElementsByTagName('tr');
            
            for (let i = 0; i < dataRows.length; i++) {
                const row = [];
                const inputs = dataRows[i].getElementsByTagName('input');
                const select = dataRows[i].getElementsByTagName('select')[0];
                
                row.push(inputs[0].value || ''); // Investment Name
                row.push(select.value || ''); // Asset Type
                row.push(inputs[2].value || '0'); // Current Value
                row.push(inputs[3].value || '0'); // Allocation
                row.push(inputs[4].value || '0'); // Monthly Interest
                row.push(inputs[5].value || '0'); // Annual Rate
                row.push(inputs[6].value || '0'); // Tax Rate
                row.push(inputs[7].value || ''); // Last Updated
                
                csv.push(row.join(','));
            }

            const csvContent = csv.join('\n');
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', 'investment_portfolio_' + new Date().toISOString().slice(0, 10) + '.csv');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Set today's date as default for new entries
        document.addEventListener('DOMContentLoaded', function() {
            const dateInputs = document.querySelectorAll('input[type="date"]');
            const today = new Date().toISOString().split('T')[0];
            dateInputs.forEach(input => {
                if (!input.value) {
                    input.value = today;
                }
            });
        });
    </script>
</body>
</html>
